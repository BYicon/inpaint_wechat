<!--painting-2.wxml-->
<view style="height: 100vh;" class="flex_column" catch:tap="hideBarsHandler">
  <!-- 涂鸦区 -->
  <view style="flex: 1; position: relative;" class="failText" wx:if="{{!hasChoosedImg}}" catch:tap="openFile">没有选择照片，点击选择</view>

  <view wx:if="{{hasChoosedImg}}" style="flex: 1; position: relative;" catch:touchstart="hideBarsHandler">
    <image src="{{cover}}"
           mode="aspectFit"
           style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); z-index: 1; width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
    />
    <canvas style="position: absolute; top: 0; left: 50%; transform: translateX(-50%); z-index: 2; width: {{canvasWidth}}px; height: {{canvasHeight}}px;"
            id="myCanvas"
            canvas-id="myCanvas"
            type="2d"
            bindtouchstart="startTouchClick"
            bindtouchmove="moveClick"
            bindtouchend="endTouchClick"
            binderror="errorClick">
    </canvas>
  </view>
  <!-- 涂鸦工具区 -->
  <view style="padding: 20rpx 30rpx 20rpx; ">
    <view class="space vertical_center">
      <!-- 颜色选择器代码 -->
    
      <view style="white-space: nowrap; display: flex; align-items: center; height: 50rpx;">
        <button class="invisible-btn" catch:tap="showColorHandler">颜色: </button>
        <view style="background-color: {{selectColor}};" class="colorBtn select" cdata-color="{{selectColor}}"></view>
      </view>


      <!-- 字号调整代码 -->
      <view style="margin-left: 20rpx; margin-right: 20rpx; display: flex; align-items: center"> <!-- 添加了左边距，以增加两部分之间的间隔 -->
        <button class="invisible-btn" catch:tap="showBrushHandler">笔刷:</button>
        <view style="width: 50rpx; text-align: right;font-size: 35rpx">{{selectSize}}</view>
      </view>
      <button class="invisible-btn" catch:tap="scaleUpMask">放大</button>
      <button class="invisible-btn" catch:tap="scaleDownMask">缩小</button>

    </view>

    <view class="space" style="padding: 10rpx 10rpx 30rpx; line-height: 40rpx;">
      <block>
      <button class="mini-btn" catch:tap="openFile">打开</button>
      </block>
      <button class="mini-btn" catch:tap="save">保存</button>
      <button class="mini-btn" type="primary" plain="{{!hasMask}}"  catch:tap="inPaint">消除</button>
      <button class="mini-btn" disabled="{{!hasPreviousCover}}" catch:tap="restore">回退</button>
      <button class="mini-btn" catch:tap="clearRect">重选</button>
      <button class="mini-btn" catch:tap="showBarsHandler">更多</button>
    </view>

    <view class="bars {{showBars && 'show'}}" style="flex: 1; z-index: 999;" wx:if="{{showBars}}">
      <button class="mini-btn" catch:tap="reloadModel">下载模型</button>
    </view>

    <view class="bars {{showBrush && 'show'}}" style="flex: 1; z-index: 999;" wx:if="{{showBrush}}">
      <view class="space vertical_center">
        <view style="width: 150rpx;font-size: 30rpx ">粗细：</view>
        <slider style="flex: 1;" value="{{selectSize}}" step="1" min="10" max="50" block-size="12" activeColor="#a88cf8" bindchange="sizeHandler" />
        <view style="width: 50rpx; text-align: right;font-size: 30rpx">{{selectSize}}</view>
      </view>
    </view>

    <view class="bars {{showColor && 'show'}}" style="flex: 1; z-index: 999;"  wx:if="{{showColor}}">
      <view class="space vertical_center" >
          <view style="width: 150rpx; font-size: 30rpx;">选择颜色：</view>
          <block wx:for="{{colors}}" wx:key="index">
              <view style="background-color: {{item}};" class="colorBtn {{selectColor == item && 'select'}}" catch:tap="colorChange" data-color="{{item}}"></view>
          </block>
      </view>
    </view>

  </view>
</view>


